<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Homepage</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <img src="profile.jpg" alt="Your Photo" class="profile-pic">
        <h1>Hello World</h1>
        <button class="contact-btn">Contact Me</button>
    </div>
    <div class="weather-widget" id="weather-widget">
        <div class="weather-loading">
            <span>🌤️</span>
            <p>Loading weather...</p>
        </div>
    </div>
    <section class="portfolio">
        <h2>Portfolio</h2>
        <div class="case-studies">
            <div class="case-card">
                <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="Case Study 1" class="case-img">
                <h3>Case Study 1: Website Redesign</h3>
                <p>Revamped a local business website for improved user experience and mobile responsiveness.</p>
                <a href="#" class="case-link">View Details</a>
            </div>
            <div class="case-card">
                <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="Case Study 2" class="case-img">
                <h3>Case Study 2: E-commerce Launch</h3>
                <p>Developed a custom online store with secure checkout and inventory management.</p>
                <a href="#" class="case-link">View Details</a>
            </div>
        </div>
    </section>
    <script>
    // Weather widget script (Steps 4-11)
    function getUserLocation() {
        return new Promise((resolve, reject) => {
            if (!navigator.geolocation) {
                reject(new Error('Geolocation not supported'));
                return;
            }
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    resolve({
                        lat: position.coords.latitude,
                        lon: position.coords.longitude
                    });
                },
                (error) => {
                    // Fallback to Seattle coordinates
                    console.log('Using fallback location');
                    resolve({ lat: 47.6062, lon: -122.3321 });
                },
                { timeout: 5000 }
            );
        });
    }

    async function fetchWeatherData(lat, lon) {
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&temperature_unit=fahrenheit&windspeed_unit=mph`;
        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return await response.json();
        } catch (error) {
            console.error('Weather fetch failed:', error);
            throw error;
        }
    }

    function getWeatherIcon(weatherCode) {
        const weatherMap = {
            0: '☀️',    // Clear sky
            1: '🌤️',    // Mainly clear
            2: '⛅',    // Partly cloudy
            3: '☁️',    // Overcast
            45: '🌫️',   // Fog
            48: '🌫️',   // Depositing rime fog
            51: '🌦️',   // Light drizzle
            61: '🌧️',   // Slight rain
            71: '❄️',   // Slight snow
            95: '⛈️'    // Thunderstorm
        };
        return weatherMap[weatherCode] || '🌤️';
    }

    function displayWeather(weatherData) {
        const widget = document.getElementById('weather-widget');
        const current = weatherData.current_weather;
        const weatherIcon = getWeatherIcon(current.weathercode);
        const temperature = Math.round(current.temperature);
        widget.innerHTML = `
            <div class="weather-current">
                <div class="weather-icon">${weatherIcon}</div>
                <div class="weather-temp">${temperature}°F</div>
            </div>
            <div class="weather-details">
                <div class="weather-wind">💨 ${current.windspeed} mph</div>
                <div class="weather-time">Updated: ${new Date().toLocaleTimeString()}</div>
            </div>
        `;
    }

    async function initWeatherWidget() {
        try {
            const location = await getUserLocation();
            const weatherData = await fetchWeatherData(location.lat, location.lon);
            displayWeather(weatherData);
        } catch (error) {
            document.getElementById('weather-widget').innerHTML = `
                <div class="weather-error">
                    <span>⚠️</span>
                    <p>Weather unavailable</p>
                </div>
            `;
        }
    }
    document.addEventListener('DOMContentLoaded', initWeatherWidget);
    // Auto-refresh every 15 minutes
    setInterval(initWeatherWidget, 15 * 60 * 1000);
    </script>
</body>
</html>
